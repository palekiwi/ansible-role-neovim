---
- name: Ensure TreeSitter dependencies are installed.
  ansible.builtin.package:
    name: "{{ item }}"
    state: present
  become: true
  loop: "{{ treesitter_system_packages }}"

- name: Install TreeSitter configuration templates.
  ansible.builtin.template:
    src: templates/lua/plugins/{{ item }}.lua.j2
    dest: "{{ plugins_dir }}/{{ item }}.lua"
    mode: "0644"
    force: true
  loop: "{{ treesitter_config_modules }}"
  notify: PackerSync
